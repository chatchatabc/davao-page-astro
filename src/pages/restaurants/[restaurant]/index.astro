---
import dataRestaurants from "../../../../data/restaurants.json";
import type { ObjectInterface } from "../../../helpers/commonInterfaces";
import { getItemsByCatalog } from "../../../helpers/commonUtils";
import PoiDetailsLayout from "../../../layouts/PoiDetailsLayout.astro";

export function getStaticPaths() {
  return getItemsByCatalog("restaurants", dataRestaurants.data).map(
    (restaurant) => {
      return {
        params: { restaurant: restaurant.slug },
        props: { restaurant },
      };
    }
  );
}
interface Props {
  restaurant: ObjectInterface;
}

const { restaurant } = Astro.props as Props;
---

<PoiDetailsLayout place={restaurant}>
  <section>
    <h2 class="text-2xl font-bold pt-5">Featured Foods</h2>
    <div class="py-2 grid grid-cols-4 gap-x-2">
      {
        restaurant.products.map((product: ObjectInterface) => {
          return (
            <div>
              <div class="border border-black aspect-w-1 aspect-h-1 relative rounded-lg overflow-hidden">
                <img
                  class="absolute inset-0 object-cover"
                  src={product.images[0].url}
                  alt={product.images[0].url}
                />
              </div>
              <div class="p-2">
                <h4 class="text-lg leading-5">{product.name}</h4>
                <div class="text-sm text-gray-500">
                  <p>
                    Food type:{" "}
                    <span class="font-medium">
                      {product.description.length ? product.description : "N/A"}
                    </span>
                  </p>
                  <p>
                    Price:{" "}
                    <span class="font-medium">
                      {product.price.length ? product.price : "₱₱"}
                    </span>
                  </p>
                </div>
              </div>
            </div>
          );
        })
      }
    </div>
  </section>
</PoiDetailsLayout>
